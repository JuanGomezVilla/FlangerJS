let canvas,ctx,interval,FJSscreen={keyboard:{},mouse:{x:-999,y:-999,click:!1,pressed:!1,hoveringElement:!1},fade:{r:0,g:0,b:0,transparency:0,running:!1,speed:.01,callback:function(){},init:function(t=0,e=0,i=0,s=function(){}){this.reset(),this.r=t,this.g=e,this.b=i,this.callback=s,this.running=!0},reset:function(){this.running=!1,this.transparency=0,this.speed=.01}},init:function(t){this.fps=null==t.fps?60:t.fps,this.fpsInterval=1e3/this.fps,canvas=null!=t.id?document.querySelector(`#${t.id}`):document.querySelector("canvas"),null==canvas&&(canvas=document.createElement("canvas"),document.body.appendChild(canvas)),ctx=canvas.getContext("2d"),t.border&&(canvas.style.border="1px solid #000000");let e=t.width,i=t.height;if(null!=t.aspectRatio){let s=t.aspectRatio.split(":",2),n=s[0],h=s[1];if(null==t.height&&null==t.width)return void console.error("One size parameter must be specified");if(null!=t.height&&null!=t.width)return void console.error("Only one size parameter is allowed");null==t.width?e=parseInt(t.height*n/h):null==t.height&&(i=parseInt(t.width*h/n))}if(null!=e&&null!=i){if(!(null!=t.aspectRatio||Number.isInteger(t.width)&&Number.isInteger(t.height)))return void console.error("Width and height must be integers");this.width=e,this.height=i,canvas.width=this.width,canvas.height=this.height}else this.width=canvas.width,this.height=canvas.height;this.title=null==document.title?"There is no title":document.title,window.addEventListener("keydown",(t=>this.keyboard[t.key]=!0)),window.addEventListener("keyup",(t=>this.keyboard[t.key]=!1)),window.addEventListener("click",(t=>this.mouse.click=!0)),window.addEventListener("mousedown",(t=>this.mouse.pressed=!0)),window.addEventListener("mouseup",(t=>this.mouse.pressed=!1)),window.addEventListener("mousemove",(t=>{let e=canvas.getBoundingClientRect();this.mouse.x=t.clientX-e.left,this.mouse.y=t.clientY-e.top})),t.easterEgg&&(window.addEventListener("blur",(t=>document.title="Come Back ;(")),window.addEventListener("focus",(t=>document.title=this.title))),console.log("%cCreated with %cFlanger","color:white;font: 30px Bahnschrift;","color:#F0DB4F;font: 40px Bahnschrift;")},getWidth:function(){return this.width},getHeight:function(){return this.height},getCentralPointX:function(){return Math.trunc(this.width/2)},getCentralPointY:function(){return Math.trunc(this.height/2)},getCentralPoint:function(){return{x:this.getCentralPointX(),y:this.getCentralPointY()}},clear:function(){ctx.clearRect(0,0,this.width,this.height)},setBackgroundColor:function(t){ctx.fillStyle=t,ctx.fillRect(0,0,this.width,this.height)},cancelClick:function(){this.mouse.click=!1},finishCicle:function(){let t=this.fade;t.running&&(ctx.fillStyle=`rgb(${t.r}, ${t.g}, ${t.b}, ${t.transparency})`,ctx.fillRect(0,0,this.width,this.height),this.fade.transparency+=t.speed,this.fade.transparency>=1&&(this.fade.speed=-.01,this.fade.callback()),t.speed<0&&t.transparency<=0&&this.fade.reset()),this.cancelClick(),canvas.style.cursor=this.mouse.hoveringElement?"pointer":"default",this.mouse.hoveringElement=!1},finishCurrentScene:function(){cancelAnimationFrame(interval)}};class FJSscene{#t;constructor(t){this.pause=t.pause||!1,this.onInit=t.onInit||function(){},this.#t=t.update,this.then=Date.now()}init(){this.onInit(),this.#e()}togglePause(){this.pause=!this.pause}#e(){interval=requestAnimationFrame((()=>this.#e())),this.#t(),FJSscreen.finishCicle()}finish(){cancelAnimationFrame(interval)}}let FJSutils={randomNumber:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},randomChoice:function(t){return t[this.randomNumber(0,t.length-1)]},getContentFromURL:async function(t,e){let i=await fetch(t);e(await i.text())},getJSON:async function(t,e){let i=await fetch(i);e(await i.json())},convertJSON:function(t){return JSON.parse(t)},downloadPlainTextFile:function(t,e){let i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),i.setAttribute("download",e),i.click(),i.remove()},fillRect:function(t=0,e=0,i=50,s=50,n="#000000"){ctx.fillStyle=n,ctx.fillRect(t,e,i,s)},fillText:function(t,e=0,i=0,s="#000000",n="",h=16,o="Arial",a="left",r="middle"){ctx.fillStyle=s,ctx.font=n+" "+h+"px "+o,ctx.textAlign=a,ctx.textBaseline=r,ctx.fillText(t,e,i)}},FJSperformance={method1:{counting:!1,frames:0,update:function(){this.counting||(this.counting=!0,setTimeout((()=>{console.log(this.frames),this.counting=!1,this.frames=0}),1e3)),this.frames++}}};class FJScontroller{#i;#s;#n;constructor(t,e,i,s,n,h,o=!1,a=!1){this.x=t,this.y=e,this.disabled=a,this.useCursorPointer=o,this.#i=i||function(){},this.#s=s||this.#i,this.#n=n||this.#s||this.#i,this.click=h||function(){}}draw(){this.hover()&&!this.disabled?(FJSscreen.mouse.hoveringElement=this.useCursorPointer,FJSscreen.mouse.pressed?this.#n():this.#s()):this.#i()}update(){this.hover()&&FJSscreen.mouse.click&&!this.disabled&&(this.click(),FJSscreen.cancelClick())}hover(){return!(this.y+this.height<FJSscreen.mouse.y||this.y>FJSscreen.mouse.y||this.x+this.width<FJSscreen.mouse.x||this.x>FJSscreen.mouse.x)}get enabled(){return!this.disabled}set enabled(t){this.disabled=!t}}class FJSbutton extends FJScontroller{constructor(t){super(t.x,t.y,t.draw,t.onHover,t.onPressed,t.onClick,!0,!1),this.width=t.width,this.height=t.height}getWidth(){return this.width}getHeight(){return this.height}setWidth(t){this.width=t}setHeight(t){this.height=t}}class FJScheckbox extends FJScontroller{constructor(t){super(t.x,t.y,(()=>{this.checked?this.onChecked():this.drawMethod()}),t.onHover,t.onPressed,t.onClick,!0),this.text=t.text,this.value=t.value,this.checked=t.checked||!1,this.drawMethod=t.draw||function(){},this.onChecked=t.onChecked||this.drawMethod,this.width=t.width,this.height=t.height}isChecked(){return this.checked}}class FJSprogress{constructor(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.progress=t.progress||0,this.speed=t.speed||1,this.draw=null!=t.draw?()=>t.draw(this.progress):function(){},this.onFinish=t.onFinish||null,this.finished=!1}update(){this.progress<100?this.progress+=this.speed:this.finished||(this.progress=100,this.onFinish(),this.finished=!0)}reset(){this.progress=0,this.finished=!1}}class FJSsprite{constructor(t,e,i,s){this.x=t,this.y=e,this.width=i,this.height=s}crashWith(t){return!(this.y+this.height<t.y||this.y>t.y+t.height||this.x+this.width<t.x||this.x>t.x+t.width)}}class FJStile{constructor(t){let e={};"object"==typeof t&&null!==t&&Object.keys(t).length>0?e=t:e.path=t,this.onLoad=e.onLoad||function(){},this.src=e.path||e.src,0!=t.auto&&this.load()}load(){this.tile=new Image,this.tile.onload=()=>{this.width=this.tile.width,this.height=this.tile.height,this.onLoad()},this.tile.src=this.src}draw(t=0,e=0,i=this.width,s=this.height){ctx.drawImage(this.tile,t,e,i,s)}}class FJStileRotation{constructor(t){let e={};"object"==typeof t&&null!==t&&Object.keys(t).length>0?e=t:e.path=t,this.onLoad=t.onLoad||function(){},this.src=e.path||e.src,0!=t.auto&&this.load(),this.angle=0}load(){this.tile=new Image,this.tile.onload=()=>{this.width=this.tile.width,this.height=this.tile.height,this.onLoad()},this.tile.src=this.src}draw(t=0,e=0,i=0,s=this.width,n=this.height){ctx.save(),ctx.translate(e,i),ctx.rotate(t),ctx.drawImage(this.tile,-s/2,-n/2,s,n),ctx.restore()}}class FJStileset{constructor(t){this.onLoad=t.onLoad||function(){},this.tiles=t.tiles,0!=t.auto&&this.load(),this.src=t.path||t.src;let e=Object.values(this.tiles)[0];this.heightKey=this.widthKey=null,"w"in e?this.widthKey="w":"width"in e&&(this.widthKey="width"),"h"in e?this.heightKey="h":"height"in e&&(this.heightKey="height")}load(){this.tileset=new Image,this.tileset.onload=()=>this.onLoad(),this.tileset.src=this.src}drawTile(t,e=0,i=0,s=this.tiles[t][this.widthKey],n=this.tiles[t][this.heightKey]){let h=this.tiles[t];ctx.drawImage(this.tileset,h.x,h.y,h.w,h.h,e,i,s,n)}}class FJStilesetRotation{constructor(t){this.onLoad=t.onLoad||function(){},this.tiles=t.tiles,0!=t.auto&&this.load(),this.src=t.path||t.src;let e=Object.values(this.tiles)[0];this.heightKey=this.widthKey=null,"w"in e?this.widthKey="w":"width"in e&&(this.widthKey="width"),"h"in e?this.heightKey="h":"height"in e&&(this.heightKey="height")}load(){this.tileset=new Image,this.tileset.onload=()=>this.onLoad(),this.tileset.src=this.src}drawTile(t,e=0,i=0,s=0,n=this.tiles[t][this.widthKey],h=this.tiles[t][this.heightKey]){let o=this.tiles[t];ctx.save(),ctx.translate(i,s),ctx.rotate(e),ctx.drawImage(this.tileset,o.x,o.y,o.w,o.h,-n/2,-h/2,n,h),ctx.restore()}}class FJSaudio{#h;constructor(t){let e;this.#h=new Audio,this.onLoad=function(){},this.onFinish=function(){},"object"==typeof t&&null!==t&&Object.keys(t).length>0?(e=t.src,this.onLoad=t.onLoad||function(){},this.onFinish=t.onFinish||function(){}):e=t,this.#h.src=e,this.#h.addEventListener("canplay",this.onLoad(),!1),this.#h.addEventListener("ended",(()=>this.onFinish()),!1)}play(){try{this.#h.play()}catch(t){throw console.error("Error while playing audio:",t),new Error("Error while playing audio")}}togglePause(){0!=this.#h.currentTime&&(this.#h.paused?this.#h.play():this.#h.pause())}stop(){this.#h.pause(),this.#h.currentTime=0}replay(){this.#h.currentTime=0,this.#h.play()}changeAudio(t){this.stop(),this.#h.src=t,this.#h.load(),this.play()}getObject(){return this.#h}get paused(){return this.#h.paused}get duration(){return this.#h.duration}get volume(){return this.#h.volume}set volume(t){this.#h.volume=t}get muted(){return this.#h.muted}set muted(t){this.#h.muted=t}}class FJSwebsocket{#o;constructor(t){this.onMessage=t.onMessage||function(){},this.onOpen=t.onOpen||function(){},this.onClose=t.onClose||function(){},this.onError=t.onError||function(){},this.websocket=new WebSocket(t.server),this.websocket.addEventListener("open",(t=>this.onOpen(t.data))),this.websocket.addEventListener("close",(t=>this.onClose(t.data))),this.websocket.addEventListener("message",(t=>this.onMessage(t.data))),this.websocket.addEventListener("error",(t=>this.onError(t.data)))}send(t){this.websocket.send(t)}getWebsocket(){return this.websocket}}let FJSgamepad={gamepad:null,init:function(t){this.onConnect=t.onConnect||function(){},this.onDisconnect=t.onDisconnect||function(){},this.onError=t.onError||function(){},window.addEventListener("gamepadconnected",(t=>{null==this.gamepad?(this.gamepad=t.gamepad,this.onConnect(t)):this.onError(t)})),window.addEventListener("gamepaddisconnected",(t=>{null!=this.gamepad&&t.gamepad.id==this.gamepad.id&&(this.gamepad=null,this.onDisconnect(t))}))},update:function(){this.gamepad=navigator.getGamepads()[0]},getAxe:function(t,e=3){return parseFloat(this.gamepad.axes[t].toFixed(e))},getButton:function(t){return this.gamepad.buttons[t]},isConnected:function(){return null!=this.gamepad},vibrate:function(){this.gamepad.vibrationActuator.playEffect("dual-rumble",{startDelay:0,duration:200,weakMagnitude:1,strongMagnitude:1})}};